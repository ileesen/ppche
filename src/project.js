require=function n(a,h,r){function d(o,t){if(!h[o]){if(!a[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(c)return c(o,!0);var i=new Error("Cannot find module '"+o+"'");throw i.code="MODULE_NOT_FOUND",i}var s=h[o]={exports:{}};a[o][0].call(s.exports,function(t){return d(a[o][1][t]||t)},s,s.exports,n,a,h,r)}return h[o].exports}for(var c="function"==typeof require&&require,t=0;t<r.length;t++)d(r[t]);return d}({Globals:[function(t,o,e){"use strict";cc._RF.push(o,"a4f642vM6tNX5hcJz562VTF","Globals"),window.Global={left:0,right:0,start:0,heroBlood:3,enemyNum:4,tejing:0,enemyBlood:3,score:0,warning:0,buff:!1,buffTime:3,roll:function(t,o){var e=t<o?parseInt(Math.random()*(o-t+1)+t,10):parseInt(Math.random()*(t-o+1)+o,10);return t<o?o<e?e=o:e:t<e?e=t:e},distance:function(t,o){var e=Math.abs(t.x)-Math.abs(o.x),i=Math.abs(t.y)-Math.abs(o.y);return Math.sqrt(e*e+i*i)},huan:0},cc._RF.pop()},{}],bg:[function(t,o,e){"use strict";cc._RF.push(o,"fe847nSjVdG0qr5/xYHhZCA","bg"),cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,bg3:cc.Node,bg4:cc.Node,bg5:cc.Node,bg6:cc.Node,bg7:cc.Node,bg8:cc.Node,bg9:cc.Node},onLoad:function(){this.bg1&&(Global.bg1=this.bg1,Global.bg2=this.bg2,Global.bg3=this.bg3,Global.bg4=this.bg4,Global.bg5=this.bg5,Global.bg6=this.bg6,Global.bg7=this.bg7,Global.bg8=this.bg8,Global.bg9=this.bg9),this.aaa=!0,Global.bg1.x=Global.bg4.x=Global.bg7.x=Global.hero.x-this.node.width,Global.bg3.x=Global.bg6.x=Global.bg9.x=Global.hero.x+this.node.width,Global.bg1.y=Global.bg2.y=Global.bg3.y=Global.hero.y+this.node.height,Global.bg7.y=Global.bg8.y=Global.bg9.y=Global.hero.y-this.node.height},update:function(t){var o=Global.bg1,e=Global.bg2,i=Global.bg3,s=Global.bg4,n=Global.bg5,a=Global.bg6,h=Global.bg7,r=Global.bg8,d=Global.bg9,c=Global.hero,l=this.node,b=o.width,y=o.height;c.x>l.x-l.width/2&&c.x<l.x+l.width/2&&c.y>l.y-l.height/2&&c.y<l.y+l.height/2&&(this.aaa?(o.x<l.x&&e.x<l.x?o.x<e.x?(o.x+=3*b,s.x+=3*b,h.x+=3*b):(e.x+=3*b,n.x+=3*b,r.x+=3*b):e.x<l.x&&i.x<l.x?e.x<i.x?(e.x+=3*b,n.x+=3*b,r.x+=3*b):(i.x+=3*b,a.x+=3*b,d.x+=3*b):o.x<l.x&&i.x<l.x&&(o.x<i.x?(o.x+=3*b,s.x+=3*b,h.x+=3*b):(i.x+=3*b,a.x+=3*b,d.x+=3*b)),o.x>l.x&&e.x>l.x?o.x>e.x?(o.x-=3*b,s.x-=3*b,h.x-=3*b):(e.x-=3*b,n.x-=3*b,r.x-=3*b):e.x>l.x&&i.x>l.x?e.x>i.x?(e.x-=3*b,n.x-=3*b,r.x-=3*b):(i.x-=3*b,a.x-=3*b,d.x-=3*b):o.x>l.x&&i.x>l.x&&(o.x>i.x?(o.x-=3*b,s.x-=3*b,h.x-=3*b):(i.x-=3*b,a.x-=3*b,d.x-=3*b)),o.y<l.y&&s.y<l.y?o.y<s.y?(o.y+=3*y,e.y+=3*y,i.y+=3*y):(s.y+=3*y,n.y+=3*y,a.y+=3*y):s.y<l.y&&h.y<l.y?s.y<h.y?(s.y+=3*y,n.y+=3*y,a.y+=3*y):(h.y+=3*y,r.y+=3*y,d.y+=3*y):o.y<l.y&&h.y<l.y&&(o.y<h.y?(o.y+=3*y,e.y+=3*y,i.y+=3*y):(h.y+=3*y,r.y+=3*y,d.y+=3*y)),o.y>l.y&&s.y>l.y?o.y>s.y?(o.y-=3*y,e.y-=3*y,i.y-=3*y):(s.y-=3*y,n.y-=3*y,a.y-=3*y):s.y>l.y&&h.y>l.y?s.y>h.y?(s.y-=3*y,n.y-=3*y,a.y-=3*y):(h.y-=3*y,r.y-=3*y,d.y-=3*y):o.y>l.y&&h.y>l.y&&(o.y>h.y?(o.y-=3*y,e.y-=3*y,i.y-=3*y):(h.y-=3*y,r.y-=3*y,d.y-=3*y)),this.aaa=!1):this.aaa=!0)}}),cc._RF.pop()},{}],cameraControl:[function(t,o,e){"use strict";cc._RF.push(o,"48795euV0RI4YqwP2qdMqQN","cameraControl"),cc.Class({extends:cc.Component,properties:{target:cc.Node},onLoad:function(){Global.doudong=this.doudong},doudong:function(){function t(){return parseInt(2*Math.random(),10)?20:-20}for(var o=cc.sequence(cc.moveBy(.2,cc.p(t(),t())),cc.moveBy(.2,cc.p(t(),t()))),e=0;e<10;e++)this.node.runAction(o)},update:function(t){Global.jtdd&&(this.doudong(),Global.jtdd=!1),this.node.position=this.target.position}}),cc._RF.pop()},{}],enemy:[function(t,o,e){"use strict";cc._RF.push(o,"796f48lJD1Ok6vCkMst5fQT","enemy"),cc.Class({extends:cc.Component,properties:{speed:"",roSpeed:"",smoke:cc.Node,fire:cc.Node,enemy:cc.Prefab,boom:cc.Prefab},onCollisionStay:function(t,o){if(0==t.tag||1==t.tag){if(0==this.buff){switch(0<this.bloodNum&&(this.buff=!0,this.scheduleOnce(function(){this.buff=!1},Global.buffTime)),this.bloodNum--,this.bloodNum){case Global.enemyBlood-1:this.smoke.getComponent(cc.ParticleSystem).resetSystem();break;case 1:this.smoke.getComponent(cc.ParticleSystem).stopSystem(),this.fire.getComponent(cc.ParticleSystem).resetSystem();break;case 0:this.fire.getComponent(cc.ParticleSystem).stopSystem();var e=cc.instantiate(this.newEnemy);e.name=this.node.name,Global.start?Global.gameScenes.addChild(e):Global.start;var i=cc.instantiate(this.boom),s=Global.distance(this.node.position,Global.hero.position);i.getComponent(cc.AudioSource).volume=100/s,Global.gameScenes.addChild(i),i.setPosition(this.node.position),"tejing"!=this.node.name?Global.score+=5:Global.score+=10,this.node.destroy()}0==this.bloodNum&&(this.start=0)}}else Global.huan=1},onCollisionExit:function(t,o){Global.huan=0},onLoad:function(){"tejing"!=this.node.name&&(this.node.getChildByName("enemy").color=cc.color(Global.roll(100,200),Global.roll(100,200),Global.roll(100,200))),this.node.getComponent(cc.RigidBody).enabledContactListener=!0,this.speed1=cc.v2(100,100),this.newEnemy=cc.instantiate(this.enemy),this.bloodNum=Global.enemyBlood,this.kaishi=1,this.left=0,this.right=0,this.buff=!1,Global.nenmySpeed=this.speed;var t=Global.gameScenes.width,o=Global.gameScenes.height;function e(){return parseInt(2*Math.random(),10)}switch(parseInt(4*Math.random(),10)){case 0:this.node.y=Global.hero.y+o/2+500,e()?this.node.x=Global.hero.x+parseInt(Math.random()*(t/2+100),10):this.node.x=Global.hero.x-parseInt(Math.random()*(t/2+100),10);break;case 1:this.node.x=Global.hero.x+t/2+500,e()?this.node.y=Global.hero.y+parseInt(Math.random()*(o/2+100),10):this.node.y=Global.hero.y-parseInt(Math.random()*(o/2+100),10);break;case 2:this.node.y=Global.hero.y-o+500,e()?this.node.x=Global.hero.x+parseInt(Math.random()*(t/2+100),10):this.node.x=Global.hero.x-parseInt(Math.random()*(t/2+100),10);break;case 3:default:this.node.x=Global.hero.x-t+500,e()?this.node.y=Global.hero.y+parseInt(Math.random()*(o/2+100),10):this.node.y=Global.hero.y-parseInt(Math.random()*(o/2+100),10)}var i=cc.v2(Global.hero.x-this.node.x,Global.hero.y-this.node.y),s=Math.atan2(i.x,i.y);s=(s=s/Math.PI*180)<0?s+360:360<s?s-360:s,this.node.rotation=s},update:function(t){if(2==Global.start&&this.node.destroy(),this.kaishi){var o=cc.v2(Global.hero.x-this.node.x,Global.hero.y-this.node.y),e=Math.atan2(o.x,o.y);e=(e=e/Math.PI*180)<0?e+360:360<e?e-360:e,this.node.rotation>e-10&&this.node.rotation<e+10?(this.right=!1,this.right=!1):e-this.node.rotation<=180&&0<=e-this.node.rotation?(this.left=!1,this.right=!0):180<e-this.node.rotation&&e-this.node.rotation<=360?(this.left=!0,this.right=!1):e-this.node.rotation<=-180&&-360<=e-this.node.rotation?(this.left=!1,this.right=!0):-180<e-this.node.rotation&&e-this.node.rotation<0&&(this.left=!0,this.right=!1),this.left?this.node.rotation-=this.roSpeed*t:this.right&&(this.node.rotation+=this.roSpeed*t),this.node.rotation<0&&(this.node.rotation=360+this.node.rotation),360<this.node.rotation&&(this.node.rotation=this.node.rotation-360),0==this.node.rotation||360==this.node.rotation?this.node.y+=this.speed*t:90==this.node.rotation?this.node.x+=this.speed*t:180==this.node.rotation?this.node.y-=this.speed*t:270==this.node.rotation?this.node.x-=this.speed*t:0<this.node.rotation&&this.node.rotation<90?(this.node.x+=this.speed*Math.sin(this.node.rotation*Math.PI/180)*t,this.node.y+=this.speed*Math.cos(this.node.rotation*Math.PI/180)*t):90<this.node.rotation&&this.node.rotation<180?(this.node.x+=this.speed*Math.cos((this.node.rotation-90)*Math.PI/180)*t,this.node.y-=this.speed*Math.sin((this.node.rotation-90)*Math.PI/180)*t):180<this.node.rotation&&this.node.rotation<270?(this.node.x-=this.speed*Math.sin((this.node.rotation-180)*Math.PI/180)*t,this.node.y-=this.speed*Math.cos((this.node.rotation-180)*Math.PI/180)*t):270<this.node.rotation&&this.node.rotation<360&&(this.node.x-=this.speed*Math.cos((this.node.rotation-270)*Math.PI/180)*t,this.node.y+=this.speed*Math.sin((this.node.rotation-270)*Math.PI/180)*t)}}}),cc._RF.pop()},{}],gameControl:[function(t,o,e){"use strict";cc._RF.push(o,"16aba4TtOBHcZJ5MLlXfuzl","gameControl"),cc.Class({extends:cc.Component,properties:{hero:cc.Node,enemy:cc.Prefab,tejing:cc.Prefab,control:cc.Node,score:cc.Label,warning:cc.Node,blood:cc.Prefab,bloodNode:cc.Node,bgAudio:cc.AudioClip,beginAudio:cc.AudioClip,jiasuBtn:cc.Button,drive:cc.Node},addEnemy:function(){var t=cc.instantiate(this.enemy);Global.gameScenes.addChild(t)},addblod:function(){var t=cc.instantiate(this.blood);this.bloodNode.addChild(t)},jiasu:function(){this.jiasuBtn.Boolean=!1},onLoad:function(){var n=this;Global.start=0,this.control.on("touchstart",function(t){if(1==Global.start)this.drive.position=this.node.convertToNodeSpaceAR(t.getLocation()),this.drive.rotation=this.hero.rotation,this.drive.active=!0;else if(0==Global.start){for(var o=0;o<Global.enemyNum;o++)this.addEnemy();for(o=0;o<this.bloodNum;o++)this.addblod();cc.audioEngine.stop(this.beginAudio1),this.current=cc.audioEngine.play(this.bgAudio,!0,.5),this.drive.position=this.node.convertToNodeSpaceAR(t.getLocation()),this.drive.rotation=this.hero.rotation,this.drive.active=!0,Global.start=1}},this),this.control.on("touchmove",function(t){var o=n.node.convertToNodeSpaceAR(t.getLocation()),e=Math.sqrt(cc.pDistanceSQ(o,this.drive.position)),i=cc.v2(o.x-this.drive.x,o.y-this.drive.y),s=Math.atan2(i.x,i.y);s=(s=s/Math.PI*180)<0?s+360:360<s?s-360:s,50<e&&(this.drive.rotation=s,this.hero.emit("direction",{direction:s}))},this),this.control.on("touchend",function(t){this.drive.active=!1},this),cc.director.getPhysicsManager().enabled=!0,this.beginAudio1=cc.audioEngine.play(this.beginAudio,!0,1),this.bloodNum=Global.heroBlood,this.fenshu=0,this.audio=!0,this.node.on("warning",function(t){this.warning.active=!0,this.warning.start=!0},this),this.jiasuBtn.node.on("touchstart",function(t){this.Boolean=!0},this.jiasuBtn),this.jiasuBtn.node.on("touchcancel",function(t){this.Boolean=!1},this.jiasuBtn),cc.director.getCollisionManager().enabled=!0,Global.gameScenes=this.node,Global.hero=this.hero;n=this},update:function(t){if(this.jiasuBtn.Boolean?0<this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress?(this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress-=.8*t,this.jiasuBtn.emitmsg||(this.hero.emit("jiasu"),this.jiasuBtn.emitmsg=!0)):(this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress<0&&(this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress=0),this.jiasuBtn.emitmsg&&(this.hero.emit("jiansu"),this.jiasuBtn.emitmsg=!1)):(this.jiasuBtn.emitmsg&&(this.hero.emit("jiansu"),this.jiasuBtn.emitmsg=!1),this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress<1?this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress+=.1*t:1<this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress&&(this.jiasuBtn.node.getChildByName("huan").getComponent(cc.ProgressBar).progress=1)),1==Global.start?this.audio=!0:(Global.score=0,Global.left=0,Global.right=0,Global.heroBlood=3,this.audio&&(cc.audioEngine.stop(this.current),this.audio=!1)),1==Global.start){if(Global.score+=t,200<Global.score&&Global.score<900&&Global.tejing<parseInt(Global.score/200,10)){var o=cc.instantiate(this.tejing);o.name="tejing",Global.gameScenes.addChild(o),Global.tejing=parseInt(Global.score/200,10)}Global.score-1>this.fenshu&&(this.fenshu=parseInt(Global.score,10),this.score.string=this.fenshu),this.warning.start&&this.warning.active&&(this.warning.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,0),cc.fadeTo(1,255)))),this.warning.start=!1)}}}),cc._RF.pop()},{}],hero:[function(t,o,e){"use strict";cc._RF.push(o,"a57cc4zkhtA17cSy7fsH+OK","hero"),cc.Class({extends:cc.Component,properties:{speed:"",roSpeed:"",chezhe:cc.Node,smoke:cc.Node,fire:cc.Node,boom:cc.Prefab,bloodNode:cc.Node,blood:cc.Prefab},onCollisionEnter:function(t,o){var e=this;if(0==Global.buff)switch(Global.jtdd=!0,this.bloodNum--,0<=this.bloodNum&&this.bloodNode.getChildByName("xin").destroy(),0<this.bloodNum&&(Global.buff=!0,this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.2,50),cc.fadeTo(0,200)))),this.scheduleOnce(function(){e.node.stopAllActions(),e.node.opacity=255,Global.buff=!1},Global.buffTime)),this.bloodNum){case this.smokePlay:this.smoke.getComponent(cc.ParticleSystem).resetSystem();break;case 1:Global.gameScenes.emit("warning"),this.smoke.getComponent(cc.ParticleSystem).stopSystem(),this.fire.getComponent(cc.ParticleSystem).resetSystem();break;case 0:this.fire.getComponent(cc.ParticleSystem).stopSystem(),Global.start=2,this.node.active=!1,this.fire.getComponent(cc.ParticleSystem).stopSystem();var i=cc.instantiate(this.boom);Global.gameScenes.addChild(i),i.setPosition(this.node.position);this.scheduleOnce(function(){cc.director.loadScene("game")},3)}},onLoad:function(){this.bloodNum=Global.heroBlood,this.smokePlay=this.bloodNum-1,this.speed=+this.speed,Global.speed=this.speed,this.node.on("jiasu",function(t){this.speed+=150},this),this.node.on("jiansu",function(t){this.speed=Global.speed},this),this.node.on("direction",function(t){this.direction=t.detail.direction},this),this.roSpeed=+this.roSpeed,this.speed=+this.speed},update:function(t){Global.start||100<this.node.y&&(this.node.y-=100),this.node.rotation>this.direction-5&&this.node.rotation<this.direction+5?(this.node.right=!1,this.node.right=!1):this.direction-this.node.rotation<=180&&0<=this.direction-this.node.rotation?(this.node.left=!1,this.node.right=!0):180<this.direction-this.node.rotation&&this.direction-this.node.rotation<=360?(this.node.left=!0,this.node.right=!1):this.direction-this.node.rotation<=-180&&-360<=this.direction-this.node.rotation?(this.node.left=!1,this.node.right=!0):-180<this.direction-this.node.rotation&&this.direction-this.node.rotation<0&&(this.node.left=!0,this.node.right=!1),1==Global.start?(0==this.node.rotation||360==this.node.rotation?this.node.y=this.node.y+this.speed*t:90==this.node.rotation?this.node.x=this.node.x+this.speed*t:180==this.node.rotation?this.node.y=this.node.y-this.speed*t:270==this.node.rotation?this.node.x=this.node.x-this.speed*t:0<this.node.rotation&&this.node.rotation<90?(this.node.x=this.node.x+this.speed*Math.sin(this.node.rotation*Math.PI/180)*t,this.node.y=this.node.y+this.speed*Math.cos(this.node.rotation*Math.PI/180)*t):90<this.node.rotation&&this.node.rotation<180?(this.node.x=this.node.x+this.speed*Math.cos((this.node.rotation-90)*Math.PI/180)*t,this.node.y=this.node.y-this.speed*Math.sin((this.node.rotation-90)*Math.PI/180)*t):180<this.node.rotation&&this.node.rotation<270?(this.node.x=this.node.x-this.speed*Math.sin((this.node.rotation-180)*Math.PI/180)*t,this.node.y=this.node.y-this.speed*Math.cos((this.node.rotation-180)*Math.PI/180)*t):270<this.node.rotation&&this.node.rotation<360&&(this.node.x=this.node.x-this.speed*Math.cos((this.node.rotation-270)*Math.PI/180)*t,this.node.y=this.node.y+this.speed*Math.sin((this.node.rotation-270)*Math.PI/180)*t),this.fire.rotation=-this.node.rotation,this.smoke.rotation=-this.node.rotation,this.node.left&&(this.node.rotation=this.node.rotation-this.roSpeed*t),this.node.right&&(this.node.rotation=this.node.rotation+this.roSpeed*t),360<this.node.rotation&&(this.node.rotation=this.node.rotation-360),this.node.rotation<0&&(this.node.rotation=360+this.node.rotation)):this.node.y=this.node.y+this.speed*t}}),cc._RF.pop()},{}]},{},["Globals","bg","cameraControl","enemy","gameControl","hero"]);